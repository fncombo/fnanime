@import '_base';

$gap: 5px;

// Placeholder when the gallery is off screen
.gallery-placeholder {
    height: 490rem;
}

// Gallery container
.gallery {
    --img-width: 145px;
    --img-height: calc(var(--img-width) * 1.4);

    @include mobile {
        --img-width: 110px;
    }

    padding: 0 $column-gap;

    .tag {
        border-radius: 0;
    }

    img {
        height: var(--img-height);
        width: var(--img-width);
        pointer-events: none;
    }
}

.gallery-section {
    margin-top: $section-gap;
    position: relative;
}

// Grid of gallery items
.gallery-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 0 -$gap;
}

// Heading sentinel element
.gallery-heading-sentinel {
    position: absolute;
    top: -60px;
    left: 0;
    right: 0;
    pointer-events: none;
}

// Gallery heading
.gallery-heading {
    background: $backdrop-background-light-fallback;
    height: 60px;
    position: sticky;
    top: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 -15px !important;
    transition: box-shadow $duration-fast $easing;
    font-weight: 600;
    font-size: 1.25rem;

    .icon {
        font-size: 1rem;
    }

    &.is-stuck {
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.25);
        z-index: 20;

        @supports (backdrop-filter: blur(20px)) {
            background: $backdrop-background-light;
            backdrop-filter: $backdrop-filter;
        }
    }
}

// Detailed description text for each rating
.gallery-detailed-description {
    text-align: center;
    padding: 0 0 20px;
}

// Item placeholder for when it shouldn't be rendered
.gallery-item-placeholder {
    flex: 0 0 var(--img-width);
    width: var(--img-width);
    height: calc(var(--img-height) + 2rem);
}

// Gallery item
.gallery-item {
    flex: 0 0 var(--img-width);
    width: var(--img-width);
    margin: $gap;
    transition: z-index $duration-medium $easing;
    z-index: 1;

    @media (hover: hover) {
        &:hover {
            text-decoration: none;
            z-index: 15;
        }
    }
}

// Inner container of gallery item
.gallery-item-inner {
    display: flex;
    flex-direction: column;
    border-radius: 6px;
    cursor: pointer;
    transition-property: opacity, box-shadow, transform;
    transition-duration: $duration-medium;
    transition-timing-function: $easing;
    overflow: hidden;
    position: relative;
    z-index: 10;

    @media (hover: hover) {
        .gallery-item:hover & {
            opacity: 1;
            color: unset;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            transform: scale(1.5);
        }
    }

    // Style for not downloaded anime
    .is-not-downloaded & {
        opacity: 0.5;
    }

    // Style for items which are very close to the sides
    .gallery-item.is-left & {
        transform-origin: left center;
    }

    .gallery-item.is-right & {
        transform-origin: right center;
    }
}

// Hover tooltip
.gallery-item-tooltip {
    background: $backdrop-background-dark-fallback;
    max-width: 27.5rem;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    position: absolute;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.25);
    color: #fff;
    font-size: 1.5rem;
    text-align: center;
    opacity: 0;
    visibility: hidden;
    transform: translateY(0);
    transition-property: visibility, opacity, transform;
    transition-duration: $duration-medium;
    transition-timing-function: $easing;
    z-index: 5;
    pointer-events: none;

    .gallery-item:hover & {
        opacity: 1;
        visibility: visible;
        transform: translateY(-4.25rem);
    }

    .gallery-item.is-left & {
        transform-origin: left top;
    }

    .gallery-item.is-right & {
        transform-origin: right top;
    }

    @supports (backdrop-filter: blur(20px)) {
        background: $backdrop-background-dark;
        backdrop-filter: $backdrop-filter;
    }
}
